(this.webpackJsonpmemory=this.webpackJsonpmemory||[]).push([[0],{34:function(e,t,a){},35:function(e,t,a){},53:function(e,t,a){},56:function(e,t,a){},57:function(e,t,a){},58:function(e,t,a){},59:function(e,t,a){"use strict";a.r(t);var c=a(1),n=a(2),r=a.n(n),s=a(37),i=a.n(s),o=a(6),u=a(18),l=a(7),j=a(8),d=a.n(j),b=a(12),m=a(23);a(47),a(60),a(61);m.a.initializeApp({apiKey:"AIzaSyDejQJ58QpkWH90c93NyCb0CReUkUI65fU",authDomain:"memory-1280c.firebaseapp.com",databaseURL:"https://memory-1280c.firebaseio.com",projectId:"memory-1280c",storageBucket:"memory-1280c.appspot.com",messagingSenderId:"971064144995",appId:"1:971064144995:web:c5ace502db77ab6257b456"});var O=m.a,h=m.a.auth(),p=m.a.firestore(),f=m.a.storage(),x=(a(34),function(){var e=Object(n.useState)(""),t=Object(o.a)(e,2),a=t[0],r=t[1],s=Object(n.useState)(""),i=Object(o.a)(s,2),u=i[0],l=i[1],j=Object(n.useState)(!1),m=Object(o.a)(j,2),O=m[0],p=m[1],f=Object(n.useState)(""),x=Object(o.a)(f,2),v=x[0],g=x[1],y=function(e){var t=e.target,a=t.name,c=t.value;"email"===a?r(c):"password"===a&&l(c)},N=function(){var e=Object(b.a)(d.a.mark((function e(t){var c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),e.prev=1,!O){e.next=8;break}return e.next=5,h.createUserWithEmailAndPassword(a,u);case 5:c=e.sent,e.next=11;break;case 8:return e.next=10,h.signInWithEmailAndPassword(a,u);case 10:c=e.sent;case 11:console.log(c),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(1),g(e.t0.message);case 17:case"end":return e.stop()}}),e,null,[[1,14]])})));return function(t){return e.apply(this,arguments)}}();return Object(c.jsxs)(c.Fragment,{children:[Object(c.jsxs)("form",{onSubmit:N,className:"authFormContainer",children:[Object(c.jsx)("input",{name:"email",type:"email",placeholder:"Email",required:!0,value:a,onChange:y,className:"authInput"}),Object(c.jsx)("input",{name:"password",type:"password",placeholder:"Password",required:!0,value:u,onChange:y,className:"authInput"}),Object(c.jsx)("input",{type:"submit",className:"authInput authSubmit",value:O?"\uac00\uc785\ud558\uae30":"\uae30\uc5b5 \uc18d\uc73c\ub85c"}),v&&Object(c.jsx)("span",{className:"authError",children:v})]}),Object(c.jsx)("span",{onClick:function(){return p((function(e){return!e}))},className:"authSwitch",children:O?"\ub85c\uadf8\uc778":Object(c.jsx)("span",{children:"\uacc4\uc815\uc774 \uc5c6\ub2e4\uba74 \uac00\uc785\ud558\uae30"})})]})}),v=a(13),g=a(38),y=function(){var e=function(){var e=Object(b.a)(d.a.mark((function e(t){var a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"google"===t.target.name&&(a=new O.auth.GoogleAuthProvider),e.next=4,h.signInWithPopup(a);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(c.jsxs)("div",{className:"authDiv",children:[Object(c.jsx)("div",{className:"authTitle",children:Object(c.jsx)("h1",{children:"Memory"})}),Object(c.jsxs)("div",{className:"authContainer",children:[Object(c.jsx)(x,{}),Object(c.jsx)("div",{children:Object(c.jsx)("div",{className:"authBtns",children:Object(c.jsx)("button",{onClick:e,name:"google",className:"authBtn",children:Object(c.jsx)(v.a,{icon:g.a})})})})]})]})},N=a(26),k=(a(53),a(19)),w=a(30),S=function(e){var t=e.userObj,a=e.memoryObj,n=function(){var e=Object(b.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.confirm("\uc815\ub9d0\ub85c \ub2f9\uc2e0\uc758 \uae30\uc5b5\uc744 \uc0ad\uc81c\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?")){e.next=7;break}return e.next=4,p.doc("".concat(t.uid,"/").concat(a.id)).delete();case 4:if(""===a.attachmentUrl){e.next=7;break}return e.next=7,f.refFromURL(a.attachmentUrl).delete();case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),r=function(){var e=Object(b.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==a.liked){e.next=2;break}return e.abrupt("return");case 2:if(!0!==a.liked){e.next=7;break}return e.next=5,p.doc("".concat(t.uid,"/").concat(a.id)).update({liked:!1});case 5:e.next=11;break;case 7:if(!1!==a.liked){e.next=11;break}return e.next=10,p.doc("".concat(t.uid,"/").concat(a.id)).update({liked:!0});case 10:console.log("liked");case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(c.jsxs)("div",{className:"memoryCard",children:[Object(c.jsx)("div",{className:"memoryImg",children:a.attachmentUrl&&Object(c.jsx)("img",{src:a.attachmentUrl})}),Object(c.jsxs)("div",{className:"components",children:[Object(c.jsx)("h4",{children:a.title}),Object(c.jsx)("p",{children:a.def}),1==a.liked?Object(c.jsx)("span",{onClick:r,className:"likedPic liked",children:Object(c.jsx)(v.a,{icon:w.a,size:"2x"})}):Object(c.jsx)("span",{onClick:r,className:"likedPic",children:Object(c.jsx)(v.a,{icon:w.a,size:"2x"})}),a.date&&Object(c.jsxs)("span",{className:"componentDate",children:[a.date," \uae30\uc5b5"]}),Object(c.jsx)("h3",{onClick:n,clsasName:"componentTrash",children:Object(c.jsx)(v.a,{icon:k.d,color:"#6DB65B",size:"larger"})})]})]})},C=(a(35),function(e){var t=e.userObj,a=Object(n.useState)(!1),r=Object(o.a)(a,2),s=r[0],i=r[1],l=Object(n.useState)(""),j=Object(o.a)(l,2),m=j[0],O=j[1],h=Object(n.useState)([]),f=Object(o.a)(h,2),x=f[0],g=f[1],y=Object(n.useState)([]),w=Object(o.a)(y,2),C=w[0],I=w[1],U=Object(n.useState)(!1),B=Object(o.a)(U,2),D=B[0],P=B[1];Object(n.useEffect)((function(){p.collection(t.uid).orderBy("createdAt","desc").onSnapshot((function(e){var t=e.docs.map((function(e){return Object(N.a)({id:e.id},e.data())}));console.log(t),g(t)}))}),[]);var F=function(){var e=Object(b.a)(d.a.mark((function e(t){var a,c,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.target,a.name,c=a.value,O(c),i(!0),n=[],e.next=6,x.filter((function(e){(e.title.toLowerCase().includes(c)||e.def.toLowerCase().includes(c))&&n.push(e)}));case 6:e.sent,I(n);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(c.jsxs)("div",{className:"main",children:[Object(c.jsx)("input",{className:"searchBar mobile",type:"search",placeholder:"Search...",onChange:F,value:m}),Object(c.jsx)("button",{className:"isMobile",onClick:function(){D?(P(!1),document.querySelector(".searchBar").classList.remove("mobile")):(P(!0),document.querySelector(".searchBar").classList.add("mobile"))},children:Object(c.jsx)(v.a,{icon:k.b})}),Object(c.jsx)("div",{className:"container",children:!0===s?C.map((function(e){return Object(c.jsx)(S,{userObj:t,memoryObj:e},e.id)})):x.map((function(e){return Object(c.jsx)(S,{userObj:t,memoryObj:e},e.id)}))}),Object(c.jsx)("button",{className:"plus",children:Object(c.jsx)(u.b,{to:"/addMemory",className:"plusText",children:"+"})})]})}),I=a(40),U=(a(56),function(e){var t=e.refreshUser,a=e.userObj,r=Object(n.useState)([]),s=Object(o.a)(r,2),i=s[0],u=s[1],j=Object(l.f)(),m=Object(n.useState)(a.displayName),O=Object(o.a)(m,2),f=O[0],x=O[1],v=Object(n.useState)([]),g=Object(o.a)(v,2),y=g[0],k=g[1],w=Object(n.useState)(!1),S=Object(o.a)(w,2),C=S[0],U=S[1];Object(n.useEffect)((function(){p.collection(a.uid).orderBy("createdAt","desc").onSnapshot((function(e){var t=e.docs.map((function(e){return Object(N.a)({id:e.id},e.data())}));console.log(t),u(t)}))}),[]),Object(n.useEffect)((function(){console.log(y),console.log(C)}),[y]);var B=function(){var e=Object(b.a)(d.a.mark((function e(c){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c.preventDefault(),a.displayName===f){e.next=5;break}return e.next=4,a.updateProfile({displayName:f});case 4:t();case 5:j.push("/");case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),D=function(){U(!1)};return Object(c.jsxs)("div",{className:"profileContainer",children:[Object(c.jsxs)("form",{onSubmit:B,className:"profileForm",children:[Object(c.jsx)("input",{onChange:function(e){var t=e.target.value;x(t)},type:"text",autoFocus:!0,placeholder:"Display name",value:f,className:"formInput"}),Object(c.jsx)("input",{type:"submit",value:"Update Profile",className:"formBtn"})]}),Object(c.jsx)("button",{className:"PhotoBtn",onClick:function(){var e=[];i.map((function(t){console.log(t.liked),!0===t.liked&&e.push(t.attachmentUrl)})),k(e),U(!0)},children:"\ucd94\uc5b5\ubcf4\uae30"}),Object(c.jsx)("div",{className:"likedimg",children:1==C&&function(e){var t,a=[],n=Object(I.a)(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;a.push(Object(c.jsx)("img",{src:r}))}}catch(s){n.e(s)}finally{n.f()}return a.push(Object(c.jsx)("span",{onClick:D,className:"hideButton",children:"hide"})),a}(y)}),Object(c.jsx)("button",{onClick:function(){h.signOut(),j.push("/")},className:"logOut",children:"log out"})]})}),B=(a(57),function(e){e.userObj;return Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)(u.b,{to:"/",className:"navTitle",children:"Memory"}),Object(c.jsx)("nav",{children:Object(c.jsx)("button",{children:Object(c.jsx)(u.b,{to:"/profile",children:Object(c.jsx)("span",{className:"navProfile",children:Object(c.jsx)(v.a,{icon:k.e,size:"2x"})})})})})]})}),D=a(24),P=a(63),F=(a(58),function(e){var t=e.userObj,a=Object(l.f)(),r=Object(n.useState)(""),s=Object(o.a)(r,2),i=s[0],u=s[1],j=Object(n.useState)(""),m=Object(o.a)(j,2),O=m[0],h=m[1],x=Object(n.useState)(""),g=Object(o.a)(x,2),y=g[0],N=g[1],w=function(){var e=Object(b.a)(d.a.mark((function e(c){var n,r,s,o,l,j;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""!==i&&""!==O){e.next=2;break}return e.abrupt("return");case 2:if(c.preventDefault(),n="",""===y){e.next=14;break}return r=f.ref().child("".concat(t.uid,"/").concat(Object(P.a)())),e.next=8,r.putString(y,"data_url");case 8:return s=e.sent,e.next=11,s.ref.getDownloadURL();case 11:n=e.sent,e.next=15;break;case 14:return e.abrupt("return");case 15:return o=new Date,l=o.getFullYear()+"/"+(o.getMonth()+1)+"/"+o.getDate(),j={title:i,def:O,createdAt:Date.now(),liked:!1,date:l,creatorId:t.uid,attachmentUrl:n},e.next=19,p.collection(t.uid).add(j);case 19:u(""),h(""),N(""),a.push("/");case 23:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),S=function(e){var t=e.target,a=t.name,c=t.value;"title"===a?u(c):"definition"===a&&h(c)};return Object(c.jsx)("div",{className:"form",children:Object(c.jsxs)("form",{onSubmit:w,className:"factoryForm",children:[Object(c.jsxs)("div",{className:"memoryFormDiv",children:[Object(c.jsx)("input",Object(D.a)({className:"",value:i,onChange:S,type:"text",placeholder:"\uc81c\ubaa9",maxLength:50,name:"title"},"className","memoryTitleInput")),Object(c.jsx)("textarea",Object(D.a)({className:"",value:O,onChange:S,type:"text",placeholder:"\uc624\ub298\uc758 \uc77c\uc744 \ub418\ub3cc\uc544\ubcf4\uba70",maxLength:300,name:"definition"},"className","memoryDefInput"))]}),Object(c.jsxs)("label",{for:"attach-file",className:"factoryInput__label",children:[Object(c.jsx)("span",{children:"\uc0ac\uc9c4 \ucd94\uac00"}),Object(c.jsx)(v.a,{icon:k.a})]}),Object(c.jsx)("input",{id:"attach-file",type:"file",accept:"image/*",onChange:function(e){var t=e.target.files[0],a=new FileReader;a.onloadend=function(e){var t=e.currentTarget.result;N(t)},a.readAsDataURL(t)},style:{opacity:0}}),y&&Object(c.jsxs)("div",{className:"factoryForm__attachment",children:[Object(c.jsx)("img",{src:y,style:{backgroundImage:y,width:200}}),Object(c.jsx)("div",{className:"factoryForm__clear",onClick:function(){return N(null)},children:Object(c.jsx)(v.a,{icon:k.c})})]}),Object(c.jsx)("input",{type:"submit",value:"\uae30\uc5b5\uc800\uc7a5",className:"saveMemoryBtn"})]})})}),L=function(e){var t=e.refreshUser,a=e.isLoggedIn,n=e.userObj;return Object(c.jsxs)(u.a,{children:[a&&Object(c.jsx)(B,{userObj:n}),Object(c.jsx)(l.c,{children:a?Object(c.jsxs)("div",{children:[Object(c.jsx)(l.a,{exact:!0,path:"/",children:Object(c.jsx)(C,{userObj:n})}),Object(c.jsx)(l.a,{exact:!0,path:"/profile",children:Object(c.jsx)(U,{userObj:n,refreshUser:t})}),Object(c.jsx)(l.a,{exact:!0,path:"/addMemory",children:Object(c.jsx)(F,{userObj:n})})]}):Object(c.jsx)(c.Fragment,{children:Object(c.jsx)(l.a,{exact:!0,path:"/",children:Object(c.jsx)(y,{})})})})]})};var A=function(){var e=Object(n.useState)(!1),t=Object(o.a)(e,2),a=t[0],r=t[1],s=Object(n.useState)(null),i=Object(o.a)(s,2),u=i[0],l=i[1];return Object(n.useEffect)((function(){h.onAuthStateChanged((function(e){l(e?{displayName:e.displayName,uid:e.uid,updateProfile:function(t){return e.updateProfile(t)}}:null),r(!0)}))}),[]),Object(c.jsx)(c.Fragment,{children:a?Object(c.jsx)(L,{refreshUser:function(){var e=h.currentUser;l({displayName:e.displayName,uid:e.uid,updateProfile:function(t){return e.updateProfile(t)}})},isLoggedIn:Boolean(u),userObj:u}):Object(c.jsxs)("div",{className:"loadingPage",children:[Object(c.jsx)("div",{className:"loadingText1",children:"Memory"}),Object(c.jsx)("div",{className:"loadingText2",children:"\uae30\uc5b5"})]})})};i.a.render(Object(c.jsx)(r.a.StrictMode,{children:Object(c.jsx)(A,{})}),document.getElementById("root"))}},[[59,1,2]]]);
//# sourceMappingURL=main.b9ca2f77.chunk.js.map