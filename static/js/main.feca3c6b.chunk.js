(this.webpackJsonpmemory=this.webpackJsonpmemory||[]).push([[0],{34:function(e,t,a){},35:function(e,t,a){},37:function(e,t,a){},55:function(e,t,a){},58:function(e,t,a){},59:function(e,t,a){},60:function(e,t,a){"use strict";a.r(t);var c=a(1),n=a(2),r=a.n(n),s=a(38),i=a.n(s),o=a(5),u=a(19),l=a(7),j=a(8),d=a.n(j),b=a(13),m=a(24);a(49),a(61),a(62);m.a.initializeApp({apiKey:"AIzaSyDejQJ58QpkWH90c93NyCb0CReUkUI65fU",authDomain:"memory-1280c.firebaseapp.com",databaseURL:"https://memory-1280c.firebaseio.com",projectId:"memory-1280c",storageBucket:"memory-1280c.appspot.com",messagingSenderId:"971064144995",appId:"1:971064144995:web:c5ace502db77ab6257b456"});var O=m.a,f=m.a.auth(),p=m.a.firestore(),h=m.a.storage(),x=(a(34),function(){var e=Object(n.useState)(""),t=Object(o.a)(e,2),a=t[0],r=t[1],s=Object(n.useState)(""),i=Object(o.a)(s,2),u=i[0],l=i[1],j=Object(n.useState)(!0),m=Object(o.a)(j,2),O=m[0],p=m[1],h=Object(n.useState)(""),x=Object(o.a)(h,2),v=x[0],g=x[1],y=function(e){var t=e.target,a=t.name,c=t.value;"email"===a?r(c):"password"===a&&l(c)},N=function(){var e=Object(b.a)(d.a.mark((function e(t){var c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),e.prev=1,!O){e.next=8;break}return e.next=5,f.createUserWithEmailAndPassword(a,u);case 5:c=e.sent,e.next=11;break;case 8:return e.next=10,f.signInWithEmailAndPassword(a,u);case 10:c=e.sent;case 11:console.log(c),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(1),g(e.t0.message);case 17:case"end":return e.stop()}}),e,null,[[1,14]])})));return function(t){return e.apply(this,arguments)}}();return Object(c.jsxs)(c.Fragment,{children:[Object(c.jsxs)("form",{onSubmit:N,className:"authFormContainer",children:[Object(c.jsx)("input",{name:"email",type:"email",placeholder:"Email",required:!0,value:a,onChange:y,className:"authInput"}),Object(c.jsx)("input",{name:"password",type:"password",placeholder:"Password",required:!0,value:u,onChange:y,className:"authInput"}),Object(c.jsx)("input",{type:"submit",className:"authInput authSubmit",value:O?"\uac00\uc785\ud558\uae30":"\uae30\uc5b5 \uc18d\uc73c\ub85c"}),v&&Object(c.jsx)("span",{className:"authError",children:v})]}),Object(c.jsx)("span",{onClick:function(){return p((function(e){return!e}))},className:"authSwitch",children:O?Object(c.jsx)("span",{children:"\uacc4\uc815\uc774 \uc788\uc73c\uc2dc\ub098\uc694? \ub85c\uadf8\uc778"}):Object(c.jsx)("span",{children:"\uacc4\uc815\uc774 \uc5c6\ub2e4\uba74 \uac00\uc785\ud558\uae30"})})]})}),v=a(12),g=a(39),y=function(){var e=function(){var e=Object(b.a)(d.a.mark((function e(t){var a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"google"===t.target.name&&(a=new O.auth.GoogleAuthProvider),e.next=4,f.signInWithPopup(a);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(c.jsxs)("div",{className:"authDiv",children:[Object(c.jsx)("div",{className:"authTitle",children:Object(c.jsx)("h1",{children:"Memory"})}),Object(c.jsxs)("div",{className:"authContainer",children:[Object(c.jsx)(x,{}),Object(c.jsx)("div",{children:Object(c.jsx)("div",{className:"authBtns",children:Object(c.jsx)("button",{onClick:e,name:"google",className:"authBtn",children:Object(c.jsx)(v.a,{icon:g.a})})})})]})]})},N=a(23),k=(a(55),a(18)),S=a(30),w=function(e){var t=e.userObj,a=e.memoryObj,n=function(){var e=Object(b.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.confirm("\uc815\ub9d0\ub85c \ub2f9\uc2e0\uc758 \uae30\uc5b5\uc744 \uc0ad\uc81c\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?")){e.next=7;break}return e.next=4,p.doc("".concat(t.uid,"/").concat(a.id)).delete();case 4:if(""===a.attachmentUrl){e.next=7;break}return e.next=7,h.refFromURL(a.attachmentUrl).delete();case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),r=function(){var e=Object(b.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==a.liked){e.next=2;break}return e.abrupt("return");case 2:if(!0!==a.liked){e.next=7;break}return e.next=5,p.doc("".concat(t.uid,"/").concat(a.id)).update({liked:!1});case 5:e.next=11;break;case 7:if(!1!==a.liked){e.next=11;break}return e.next=10,p.doc("".concat(t.uid,"/").concat(a.id)).update({liked:!0});case 10:console.log("liked");case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(c.jsxs)("div",{className:"memoryCard",children:[Object(c.jsx)("div",{className:"memoryImg",children:a.attachmentUrl&&Object(c.jsx)("img",{src:a.attachmentUrl})}),Object(c.jsxs)("div",{className:"components",children:[Object(c.jsx)("h4",{children:a.title}),Object(c.jsx)("p",{children:a.def}),1==a.liked?Object(c.jsx)("span",{onClick:r,className:"likedPic liked",children:Object(c.jsx)(v.a,{icon:S.a,size:"2x"})}):Object(c.jsx)("span",{onClick:r,className:"likedPic",children:Object(c.jsx)(v.a,{icon:S.a,size:"2x"})}),a.date&&Object(c.jsxs)("span",{className:"componentDate",children:[a.date," \uae30\uc5b5"]}),Object(c.jsx)("h3",{onClick:n,clsasName:"componentTrash",children:Object(c.jsx)(v.a,{icon:k.d,color:"#6DB65B",size:"larger"})})]})]})},C=(a(35),function(e){var t=e.userObj,a=Object(n.useState)(!1),r=Object(o.a)(a,2),s=r[0],i=r[1],l=Object(n.useState)(""),j=Object(o.a)(l,2),m=j[0],O=j[1],f=Object(n.useState)([]),h=Object(o.a)(f,2),x=h[0],g=h[1],y=Object(n.useState)([]),S=Object(o.a)(y,2),C=S[0],U=S[1],I=Object(n.useState)(!1),P=Object(o.a)(I,2),D=P[0],B=P[1];Object(n.useEffect)((function(){p.collection(t.uid).orderBy("createdAt","desc").onSnapshot((function(e){var t=e.docs.map((function(e){return Object(N.a)({id:e.id},e.data())}));console.log(t),g(t)}))}),[]);var F=function(){var e=Object(b.a)(d.a.mark((function e(t){var a,c,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.target,a.name,c=a.value,O(c),i(!0),n=[],e.next=6,x.filter((function(e){(e.title.toLowerCase().includes(c)||e.def.toLowerCase().includes(c))&&n.push(e)}));case 6:e.sent,U(n);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(c.jsxs)("div",{className:"main",children:[Object(c.jsx)("input",{className:"searchBar mobile",type:"search",placeholder:"Search...",onChange:F,value:m}),Object(c.jsx)("button",{className:"isMobile",onClick:function(){D?(B(!1),document.querySelector(".searchBar").classList.remove("mobile")):(B(!0),document.querySelector(".searchBar").classList.add("mobile"))},children:Object(c.jsx)(v.a,{icon:k.b})}),Object(c.jsx)("div",{className:"container",children:!0===s?C.map((function(e){return Object(c.jsx)(w,{userObj:t,memoryObj:e},e.id)})):x.map((function(e){return Object(c.jsx)(w,{userObj:t,memoryObj:e},e.id)}))}),Object(c.jsx)("button",{className:"plus",children:Object(c.jsx)(u.b,{to:"/addMemory",className:"plusText",children:"+"})})]})}),U=(a(37),function(e){var t=e.refreshUser,a=e.userObj,r=Object(n.useState)([]),s=Object(o.a)(r,2),i=(s[0],s[1]),u=Object(l.f)(),j=Object(n.useState)(a.displayName),m=Object(o.a)(j,2),O=m[0],x=m[1],v=Object(n.useState)([]),g=Object(o.a)(v,2),y=(g[0],g[1],Object(n.useState)(!1)),k=Object(o.a)(y,2),S=(k[0],k[1],Object(n.useState)("")),w=Object(o.a)(S,2),C=w[0],U=w[1],I="";Object(n.useEffect)((function(){p.collection(a.uid).orderBy("createdAt","desc").onSnapshot((function(e){var t=e.docs.map((function(e){return Object(N.a)({id:e.id},e.data())}));i(t)})),p.collection("profile").doc(a.uid).get().then((function(e){e.exists&&(I=e.data().attachmentUrl,U(I))}))}),[]);var P=function(){var e=Object(b.a)(d.a.mark((function e(c){var n,r,s,i;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c.preventDefault(),a.displayName===O){e.next=5;break}return e.next=4,a.updateProfile({displayName:O});case 4:t();case 5:if(n="",""===C){e.next=16;break}return r=h.ref().child("profile/".concat(a.uid)),e.next=10,r.putString(C,"data_url");case 10:return s=e.sent,e.next=13,s.ref.getDownloadURL();case 13:return n=e.sent,e.next=16,p.doc("profile/".concat(a.uid)).delete();case 16:return i={id:a.uid,attachmentUrl:n},e.next=19,p.collection("profile").doc(a.uid).set(i);case 19:u.push("/");case 20:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(c.jsxs)("div",{className:"profileContainer",children:[Object(c.jsxs)("form",{onSubmit:P,className:"profileForm",children:[Object(c.jsx)("label",{for:"attach-file",className:"PofileInput__label",children:Object(c.jsx)("div",{className:"img-thumbnail img-circle",children:Object(c.jsxs)("div",{children:[C?Object(c.jsx)("img",{className:"profileImg",src:C}):Object(c.jsx)("img",{className:"profileImg",src:"https://cdn.pixabay.com/photo/2015/10/05/22/37/blank-profile-picture-973460_1280.png"}),Object(c.jsx)("span",{className:"span_upload",children:"UPLOAD"})]})})}),Object(c.jsx)("input",{id:"attach-file",type:"file",accept:"image/*",onChange:function(e){var t=e.target.files[0],a=new FileReader;a.onloadend=function(e){var t=e.currentTarget.result;U(t)},a.readAsDataURL(t)},style:{opacity:0}}),Object(c.jsx)("input",{onChange:function(e){var t=e.target.value;x(t)},type:"text",autoFocus:!0,placeholder:"Display name",value:O,className:"formInput"}),Object(c.jsx)("input",{type:"submit",value:"Update Profile",className:"formBtn"})]}),Object(c.jsx)("button",{onClick:function(){f.signOut(),u.push("/")},className:"logOut",children:"log out"})]})}),I=(a(58),function(e){var t=e.userObj,a=Object(n.useState)(""),r=Object(o.a)(a,2),s=r[0],i=r[1],j=Object(l.f)();return Object(n.useEffect)((function(){p.collection("profile").doc(t.uid).get().then((function(e){if(e.exists){var t=e.data().attachmentUrl;i(t)}}))}),[]),Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)(u.b,{to:"/",className:"navTitle",children:"Memory"}),Object(c.jsx)("nav",{children:Object(c.jsxs)("span",{className:"navProfile",children:[""!==s?Object(c.jsx)("img",{src:s,className:"profileMainImg"}):Object(c.jsx)(v.a,{icon:k.e,size:"2x"}),Object(c.jsxs)("div",{className:"dropdown-content",children:[Object(c.jsx)(u.b,{to:"/likedPictures",children:Object(c.jsx)("button",{children:"likePicture"})}),Object(c.jsx)("br",{}),Object(c.jsx)(u.b,{to:"/profile",children:Object(c.jsx)("button",{children:"Profile"})}),Object(c.jsx)("br",{}),Object(c.jsx)("button",{onClick:function(){f.signOut(),j.push("/")},className:"logOutBtn",children:"Logout"})]})]})})]})}),P=a(25),D=a(63),B=(a(59),function(e){var t=e.userObj,a=Object(l.f)(),r=Object(n.useState)(""),s=Object(o.a)(r,2),i=s[0],u=s[1],j=Object(n.useState)(""),m=Object(o.a)(j,2),O=m[0],f=m[1],x=Object(n.useState)(""),g=Object(o.a)(x,2),y=g[0],N=g[1],S=function(){var e=Object(b.a)(d.a.mark((function e(c){var n,r,s,o,l,j;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""!==i&&""!==O){e.next=2;break}return e.abrupt("return");case 2:if(c.preventDefault(),n="",""===y){e.next=14;break}return r=h.ref().child("".concat(t.uid,"/").concat(Object(D.a)())),e.next=8,r.putString(y,"data_url");case 8:return s=e.sent,e.next=11,s.ref.getDownloadURL();case 11:n=e.sent,e.next=15;break;case 14:return e.abrupt("return");case 15:return o=new Date,l=o.getFullYear()+"/"+(o.getMonth()+1)+"/"+o.getDate(),j={title:i,def:O,createdAt:Date.now(),liked:!1,date:l,creatorId:t.uid,attachmentUrl:n},e.next=19,p.collection(t.uid).add(j);case 19:u(""),f(""),N(""),a.push("/");case 23:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),w=function(e){var t=e.target,a=t.name,c=t.value;"title"===a?u(c):"definition"===a&&f(c)};return Object(c.jsx)("div",{className:"form",children:Object(c.jsxs)("form",{onSubmit:S,className:"factoryForm",children:[Object(c.jsxs)("div",{className:"memoryFormDiv",children:[Object(c.jsx)("input",Object(P.a)({className:"",value:i,onChange:w,type:"text",placeholder:"\uc81c\ubaa9",maxLength:50,name:"title"},"className","memoryTitleInput")),Object(c.jsx)("textarea",Object(P.a)({className:"",value:O,onChange:w,type:"text",placeholder:"\uc624\ub298\uc758 \uc77c\uc744 \ub418\ub3cc\uc544\ubcf4\uba70",maxLength:300,name:"definition"},"className","memoryDefInput"))]}),Object(c.jsxs)("label",{for:"attach-file",className:"factoryInput__label",children:[Object(c.jsx)("span",{children:"\uc0ac\uc9c4 \ucd94\uac00"}),Object(c.jsx)(v.a,{icon:k.a})]}),Object(c.jsx)("input",{id:"attach-file",type:"file",accept:"image/*",onChange:function(e){var t=e.target.files[0],a=new FileReader;a.onloadend=function(e){var t=e.currentTarget.result;N(t)},a.readAsDataURL(t)},style:{opacity:0}}),y&&Object(c.jsxs)("div",{className:"factoryForm__attachment",children:[Object(c.jsx)("img",{src:y,style:{backgroundImage:y,width:200}}),Object(c.jsx)("div",{className:"factoryForm__clear",onClick:function(){return N(null)},children:Object(c.jsx)(v.a,{icon:k.c})})]}),Object(c.jsx)("input",{type:"submit",value:"\uae30\uc5b5\uc800\uc7a5",className:"saveMemoryBtn"})]})})}),F=a(41),L=function(e){var t=e.userObj,a=Object(n.useState)([]),r=Object(o.a)(a,2),s=r[0],i=r[1],u=Object(n.useState)(!1),l=Object(o.a)(u,2),j=l[0],d=l[1],b=Object(n.useState)([]),m=Object(o.a)(b,2),O=m[0],f=m[1];Object(n.useEffect)((function(){p.collection(t.uid).orderBy("createdAt","desc").onSnapshot((function(e){var t=e.docs.map((function(e){return Object(N.a)({id:e.id},e.data())}));f(t)}))}),[]),Object(n.useEffect)((function(){var e=[];O.map((function(t){console.log(t.liked),!0===t.liked&&e.push(t.attachmentUrl)})),console.log(e),i(e),d(!0)}),[O]);return Object(c.jsx)(c.Fragment,{children:Object(c.jsx)("div",{className:"likedimg",children:1==j&&function(e){var t,a=[],n=Object(F.a)(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;a.push(Object(c.jsx)("img",{src:r}))}}catch(s){n.e(s)}finally{n.f()}return a}(s)})})},A=function(e){var t=e.refreshUser,a=e.isLoggedIn,n=e.userObj;return Object(c.jsxs)(u.a,{children:[a&&Object(c.jsx)(I,{userObj:n}),Object(c.jsx)(l.c,{children:a?Object(c.jsxs)("div",{children:[Object(c.jsx)(l.a,{exact:!0,path:"/",children:Object(c.jsx)(C,{userObj:n})}),Object(c.jsx)(l.a,{exact:!0,path:"/profile",children:Object(c.jsx)(U,{userObj:n,refreshUser:t})}),Object(c.jsx)(l.a,{exact:!0,path:"/addMemory",children:Object(c.jsx)(B,{userObj:n})}),Object(c.jsx)(l.a,{exact:!0,path:"/likedPictures",children:Object(c.jsx)(L,{userObj:n})})]}):Object(c.jsx)(c.Fragment,{children:Object(c.jsx)(l.a,{exact:!0,path:"/",children:Object(c.jsx)(y,{})})})})]})};var _=function(){var e=Object(n.useState)(!1),t=Object(o.a)(e,2),a=t[0],r=t[1],s=Object(n.useState)(null),i=Object(o.a)(s,2),u=i[0],l=i[1];return Object(n.useEffect)((function(){f.onAuthStateChanged((function(e){l(e?{displayName:e.displayName,uid:e.uid,updateProfile:function(t){return e.updateProfile(t)}}:null),r(!0)}))}),[]),Object(c.jsx)(c.Fragment,{children:a?Object(c.jsx)(A,{refreshUser:function(){var e=f.currentUser;l({displayName:e.displayName,uid:e.uid,updateProfile:function(t){return e.updateProfile(t)}})},isLoggedIn:Boolean(u),userObj:u}):Object(c.jsxs)("div",{className:"loadingPage",children:[Object(c.jsx)("div",{className:"loadingText1",children:"Memory"}),Object(c.jsx)("div",{className:"loadingText2",children:"\uae30\uc5b5"})]})})};i.a.render(Object(c.jsx)(r.a.StrictMode,{children:Object(c.jsx)(_,{})}),document.getElementById("root"))}},[[60,1,2]]]);
//# sourceMappingURL=main.feca3c6b.chunk.js.map